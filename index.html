<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll Effect Website (Initial Content Visible)</title>
    <link rel="stylesheet" href="./gallery.css">
    <link rel="stylesheet" href="./header.css">
    <link rel="stylesheet" href="./footer.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/webfontworld/kopus@latest/KoPubDotum.css">
    <style>
        /* 기본 스타일 */
        * {
            margin: 0;
            padding: 0;
            

        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            padding-top: 60px;

            background-image: radial-gradient(circle at 60% 150%, #016563, #055f5b, #074a62, #082e4e, #021126, #030A20);
            background-color: #031227;
            background-attachment: fixed;
        }





        .hero-section {
            position: static;
            top: 60px;
            /* 헤더 높이만큼 아래에서 고정됩니다. (JS에서 동적으로 설정) */
            height: calc(100vh - 60px);
            /* 뷰포트 높이에서 헤더 높이를 제외한 만큼 높이를 차지합니다. (JS에서 동적으로 설정) */
            overflow: hidden;
            z-index: 1;
            display: inline-block;
            width: 100%;



        }

        #svgContent {
            position: inherit;
            border: solid 1px #d1ff2b;
        }

        .hero-text-overlay {
            position: fixed;
            text-align: center;
            z-index: 1;
            top: 35%;
            left: 60%;
            width: 400px;
            font-family:"KoPubDotum";

        }

        .hero-text {
            font-size: 4em;
            margin: 0;
            color: white;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
        }

        /* 메인 콘텐츠 섹션 */
        .main-content {
            position: relative;
            background-color: #f2f2f2;
            z-index: 2;
            padding: 50px 30px;
            max-width: 100%;
            height: auto;
            margin: 0 auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);

            border-top-left-radius: 40px 30px;
            border-top-right-radius: 40px 30px;

            margin-top: -30vh;
        }

        .main-content h2 {
            font-size: 2.5em;
            color: #007bff;
            text-align: center;
            margin-bottom: 40px;
        }

        .main-content p {
            margin-bottom: 20px;
            font-size: 1.1em;
            line-height: 1.8;
        }

        svg {
            position: fixed;
            width: 900px;
            height: 450px;


        }

        #mainImg {
            background-image: radial-gradient(circle at 60% 300%, #016563, #055f5b, #074a62, #082e4e, #021126, #030A20);
            background-color: #031227;

            width: 100%;
            height: 400px;


            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 10px;
        }

        #mainImg ul {
            list-style: none;
            display: flex;
            justify-content: center;
            align-items: center;

        }

        #mainImg ul li {
            margin: 0 10px;

        }

        #mainImg ul li img {
            max-width: 100%;
            height: auto;
            display: block;

        }

        #todaysObservation {
            text-align: center;
            margin-top: 50px;

        }


        #cardSection {
            display: flex;
            /* flexbox를 사용하여 자식 요소(카드)들을 유연하게 배치 */
            flex-wrap: wrap;
            /* 자식 요소들이 컨테이너 너비를 넘으면 다음 줄로 자동 줄바꿈 */
            justify-content: center;
            /* 카드들을 가운데 정렬 */
            /* padding이나 margin을 추가하여 컨테이너와 화면 가장자리 간의 간격 조절 */
            padding: 20px;
        }

        .card {
            background-color: rgb(255, 255, 255);
            padding: 20px;
            margin: 20px 10px;
            /* display: inline-block; (flexbox를 사용하면 제거) */

            /* 고정된 width 대신 flexbox 속성 또는 max-width 사용 */
            width: 400px;
            /* 데스크탑 기본 너비 */
            height: 650px;
            border-radius: 35px;
            box-shadow: 10px 12px 13px 0px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
            /* padding과 border가 width/height에 포함되도록 */
        }

        .cardDescription {
            padding: 0 15px 15px;
            font-size: 1em;
            color: #585858;
            line-height: 1.5;
            overflow-wrap: break-word;
        }

        .cardTitle {
            font-size: 1.2em;
            font-weight: bold;
            margin: 5px 0;
        }

        .cardImg {
            /* width: 400px; (부모 카드 너비에 맞춰 조정) */
            width: 100%;
            /* 부모 카드 너비에 꽉 차게 */
            height: 450px;
            overflow: hidden;
            border-radius: 25px;
        }

        .cardImg img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        #gallery{
            border-radius: 8px;
        }

        /* 모바일 반응형 */
        @media (max-width: 900px) {
            .topNav {
                position: absolute;
                background-color: white;
                padding: 15px 30px;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                z-index: 100;

                display: flex;

                align-items: center;

                box-sizing: border-box;
                flex-direction: column;
                padding: 10px 20px;
            }

            .topNav h1 {
                /* h1을 모바일 헤더의 중앙에 배치 */
                position: static;
                /* relative/absolute 설정 해제 */
                margin: 0 auto 10px auto;
                /* 좌우 마진 auto로 가운데 정렬, 하단에 10px 여백 */
                text-align: center;
                /* 텍스트 정렬 */
                width: 100%;
                /* 너비 100%로 설정하여 margin:auto가 제대로 작동하도록 함 */
            }


            .topNav nav ul {
                /* 데스크탑에서 상속되는 absolute positioning 재정의 */
                position: static;
                /* absolute 설정을 해제하여 플렉스 흐름에 따르도록 함 */
                left: auto;
                /* 기존 left 값 초기화 */
                top: auto;
                /* 기존 top 값 초기화 */
                transform: none;
                /* transform 값 초기화 */
                width: 100%;
                text-align: center;
            }



            .topNav nav ul li {
                margin: 0 5px;
                display: block;
            }

            .topNav nav ul li a {
                display: block;
                text-align: center;
                padding: 5px 10px;

            }

            .hero-text-overlay {
                position: fixed;
                top: 55%;
                left: 50%;
                transform: translateX(-50%);
                width: 90%;
                max-width: 400px;
                text-align: center;

            }

            .hero-text {
                font-size: 2em;
                position: static;
                width: auto;
                text-align: center;

            }

            .main-content {
                padding:  30px 0;
                margin-top: -15vh;
                /* 모바일에서는 오버레이를 조금 줄일 수 있습니다. */
                height: auto;
            }

            svg {
                height: 600px;
            }

            #mainImg {
                width: 100%;
                height: 870px;


                display: block;
            }

            #mainImg ul {
                padding-top: 20px;
                list-style: none;
                display: block;


            }

            #mainImg ul li {
                margin: 0 10px;
                text-align: center;

            }

            #mainImg ul li img {

                display: inline-block;

            }

            .card {
                width: 100%;
                height: auto;
                margin: 15px auto;
                padding: 15px;
            }

            .cardImg {
                /* width: 100%; (이미 cardImg에 100% 설정되어 있으므로 변경 없음) */
                height: 250px;
                /* 모바일에서 이미지 높이 줄이기 */
            }


            .cardDescription {
                font-size: 0.9em;
                /* 모바일에서 텍스트 크기 줄이기 */
                padding: 0 10px 10px;
            }

            #gallery h1 {
                text-align: center;
                margin: 60px 0 20px 0;
            }

            #galleryMainImage {
                padding: 0 24px 0 24px;
                width: 100%;
                height: auto;
                object-fit: contain;
                box-sizing: border-box;
            }

            #thumbnail ul img {
                width: 50px;
                height: 50px;

            }
        }




        .trail {
            fill: none;
            stroke: #00ffee;
            stroke-width: 2;
        }


        .star {
            fill: #70AD98;
            stroke: none;
        }








    </style>

</head>

<body>
    <header class="topNav">
        <h1><a href="./index.html"><img src="./img/밤하늘여행로고.png" alt=""밤하늘여행로고></a></h1>
        <div id="nav">
            <nav>
                <ul>
                    <li><a href="./section1.html">오늘의 밤하늘</a></li>
                    <li><a href="./section2.html">행성과 함께</a></li>
                    <li><a href="./section3.html">딥스카이 탐험</a></li>
                    <li><a href="./section4.html">관측 길라잡이</a></li>
                    <li><a href="./section5.html">갤러리</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="hero-section">
        <div id="svgContent">
            <svg id="starSvg" viewBox="0 0 900 400">
                <circle class="star" id="star1" cx="150" cy="150" r="1.5" />
            </svg>
        </div>



        <div class="hero-text-overlay">
            <h2 class="hero-text">밤하늘 여행</h2>
        </div>
    </div>

    <!-- main-content가 hero-section 바로 아래에 위치하며, 음수 margin-top으로 오버레이됩니다. -->
    <main class="main-content">
        <section id="menuSection">
            <div id="mainImg">
                <ul>
                    <li><a href="./section1.html"><img src="./img/메뉴테스트.png" alt=""></a></li>
                    <li><a href="./section2.html"><img src="./img/메뉴테스트.png" alt=""></a></li>
                    <li><a href="./section3.html"><img src="./img/메뉴테스트.png" alt=""></a></li>
                    <li><a href="./section4.html"><img src="./img/메뉴테스트.png" alt=""></a></li>
                    <li><a href="./section5.html"><img src="./img/메뉴테스트.png" alt=""></a></li>
                </ul>
            </div>
        </section>

        <article id="todaysObservation">
            <h1>오늘의 추천 관측대상</h1>
            <div id="cardSection">
                <div class="card">
                    <div class="cardImg">
                        <img src="./img/m13.png" width="500" height="500">
                    </div>
                    <div class="cardTitle">허큘리스 대성단 m13</div>
                    <div class="cardDescription">
                        허큘리스자리에 있으며, 북반구에서 가장 크고 밝은 구상성단이다. 지구에서 25,000 광년 떨어져 있으며 170광년의 직경 내에 50만 개의 별들이 밀집되어 있다. 겉보기
                        등급이 5.8등급이므로 맨눈으로 볼 수 있다.
                    </div>
                </div>
                <div class="card">
                    <div class="cardImg">
                        <img src="./img/베일성운2.jfif" width="500" height="500">
                    </div>
                    <div class="cardTitle">서쪽 베일 성운 NGC 6960</div>
                    <div class="cardDescription">
                        백조자리에서 가장 유명하고 거대한 초신성 잔해 중 하나이다. 지구에서 약 1,470 광년 떨어져 있으며, 약 130 광년의 직경이다. 겉보기 등급이 7등급 미만이므로 맨눈으로 보기 어려우며, 망원경이나 쌍안경으로 관측해야 볼 수 있다.
                    </div>
                </div>
                <div class="card">
                    <div class="cardImg">
                        <img src="./img/고리성운.jfif" width="500" height="500">
                    </div>
                    <div class="cardTitle">고리 성운 m57</div>
                    <div class="cardDescription">
                        고리 성운은 거문고자리에 있으며, 지구에서 약 2,300 광년 떨어져 있다. 지금까지 2~30km/s의 속도로 가스를 주변으로 퍼트리고 있다. 4인치 정도의 망원경으로는 다른 별들과 대비되는 희미한 빛구름 형태의 고리모양을 볼 수 있다.
                    </div>
                </div>
            </div>

        </article>

        <section>
            <div id="gallery">
                <h1>이미지 갤러리</h1>
                <img id="galleryMainImage" src="./img/9.webp" alt="메인 이미지">
                <div id="thumbnail">
                    <img src="./img/left.png" id="move_left" alt="왼쪽 화살표">
                    <ul>
                        <li><img src="./img/장미성운.jfif" alt="썸네일 8"></li>
                        <li><img src="./img/9.webp" alt="썸네일 1"></li>
                        <li><img src="./img/m27.jfif" alt="썸네일 2"></li>
                        <li><img src="./img/장미성운2.jfif" alt="썸네일 8"></li>
                        <li><img src="./img/장미성운3.png" alt="썸네일 8"></li>
                        <li><img src="./img/버블성운1.jfif" alt="썸네일 3"></li>
                        <li><img src="./img/북아메리카성운.jfif" alt="썸네일 4"></li>
                        <li><img src="./img/영혼 성운.jfif" alt="썸네일 5"></li>
                        <li><img src="./img/베일성운.png" alt="썸네일 5"></li>
                        <li><img src="./img/베일성운2.jfif" alt="썸네일 5"></li>
                        <li><img src="./img/고리성운.jfif" alt="썸네일 5"></li>
                        <li><img src="./img/돌고래성운.jfif" alt="썸네일 6"></li>
                        <li><img src="./img/m13.png" alt="썸네일 7"></li>
                        <li><img src="./img/m104.png" alt="썸네일 8"></li>
                        <li><img src="./img/ngc7293.jfif" alt="썸네일 8"></li>
                        <li><img src="./img/마귀할멈성운.jfif" alt="썸네일 8"></li>
                        <li><img src="./img/장미성운4.jfif" alt="썸네일 8"></li>
                        <li><img src="./img/코끼리성운.jfif" alt="썸네일 8"></li>
                        <li><img src="./img/팩맨성운.jfif" alt="썸네일 8"></li>
                        <li><img src="./img/하트성운.jfif" alt="썸네일 8"></li>

                    </ul>
                    <img src="./img/right.png" id="move_right" alt="오른쪽 화살표">
                </div>
            </div>

        </section>


    <footer>
        <article id="address">
            <ul id="footer_menu">
                <li>개인정보 취급 방침 | 이용안내 | 이메일 무단 수집 거부</li>
                <li>상호 : 밤하늘 여행 | 대표 : gammapasta | 등록번호 : 123-45-67890</li>
            </ul>
            <ul id="company_info">
                <li>밤하늘 여행 유한회사</li>
                <li>대표이사: gammapasta</li>
                <li>주소: 태양계 지구 위성 A23-s521</li>
                <li>이미지 출처: <a
                        href="https://github.com/gammapasta/gammapasta.github.io/blob/main/image_source.txt">link</a>
                </li>
                <li id="copyright">
                    <p>Copyright © <span id="currentYear"></span> gammapasta. Licensed under the <a
                            href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer">MIT
                            License</a>.</p>
                </li>
                <li></li>
            </ul>
        </article>
        <article id="link">
            <h3>고객센터 159-9912-9-3332</h3>
            <select>
                <option>네이버</option>
                <option>구글</option>
            </select>
            <div id="icons">
                <img src="./img/facebook.png">
                <img src="./img/insta.png">
                <img src="./img/t.png">
            </div>
        </article>
    </footer>
        <div class="clear"></div>

    </main>


</body>

<script>

    const heroImages = document.querySelectorAll('.hero-image');
    const heroTexts = document.querySelectorAll('.hero-text');
    const heroSection = document.querySelector('.hero-section');
    const mainContent = document.querySelector('.main-content');

    // 헤더의 실제 높이를 동적으로 가져옵니다.
    const headerHeight = document.querySelector('.topNav').offsetHeight;

    // hero-section의 top과 height를 동적으로 조정합니다.
    heroSection.style.top = `${headerHeight}px`;
    heroSection.style.height = `calc(120vh - ${headerHeight}px)`;

    // --- main-content의 margin-top을 동적으로 설정 (선택 사항) ---
    // CSS에서 고정된 vh 값으로 설정해도 되지만, 여기서는 heroSection 높이에 비례하여 설정할 수 있습니다.
    // 예를 들어 heroSection 높이의 30%를 덮도록 설정
    const overlapAmount = heroSection.offsetHeight * 0.3; // heroSection 높이의 30%
    mainContent.style.marginTop = `-${overlapAmount}px`;




    const centerX = 150;
    const centerY = 150;



    //TODO stroke-width variable로 변경하기!!!!
    const svgContainer = document.getElementById('starSvg');
    const circles = [];
    const radiusList = [];
    const circumferenceList = [];
    const elementId = [];

    let starNumber = 0;

    const starList = [];

    for (let r = 10; r <= 900; r += 4) {
        let currentCircumference = 2 * Math.PI * r;
        let startAngle = 0;
        const trailSize = Math.random() * 2.2 + .3;
        //박스 내부에 만들기
        if (r < 220) {
            angle = Math.random() * 360;

        } else if (r < 350) {
            angle = 270 + Math.random() * 220;
        }
        else {
            angle = 290 + Math.random() * 110;

        }
        startAngle = angle;
        let rotateTransform = `rotate(${startAngle} ${centerX} ${centerY})`;





        let starLightX = centerX + r * Math.cos(startAngle * (Math.PI / 180));
        let starLightY = centerY + r * Math.sin(startAngle * (Math.PI / 180));

        radiusList.push(r);
        circumferenceList.push(currentCircumference);

        starNumber += 1;

        const circleId = `trail${starNumber}`;
        const starId = `star${starNumber}`;



        const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        circle.setAttribute("class", "trail");
        circle.setAttribute("id", circleId);
        circle.setAttribute("cx", centerX);
        circle.setAttribute("cy", centerY);
        circle.setAttribute("r", r);
        circle.setAttribute("transform", rotateTransform);
        svgContainer.appendChild(circle);

        const colors = ['#E2FFFA', '#4C8385', '#43757E', '#0A4553', '#477C85', '#C1E9EC', '#184151', '#98C9D1', '#386671'];
        const trailColor = colors[Math.floor(Math.random() * colors.length)];

        circle.style.strokeDasharray = currentCircumference; //원 길이
        circle.style.strokeDashoffset = currentCircumference; //안보이게 하는거
        circle.style.stroke = `${trailColor}`;
        circle.style.strokeWidth = trailSize;
        circle.style.zIndex = 1;
        circles.push(circle);

        const star = document.createElementNS("http://www.w3.org/2000/svg", "circle")
        star.setAttribute("class", "star");
        star.setAttribute("id", starId);
        star.setAttribute("cx", starLightX)
        star.setAttribute("cy", starLightY)
        let starSize = 1
        if (trailSize < 1) { starSize = 0.2 }
        star.setAttribute("r", starSize)
        star.style.zIndex = 1;
        star.style.fill = `${trailColor}`;

        //별 반짝임
        const animate = document.createElementNS("http://www.w3.org/2000/svg", "animate");
        animate.setAttribute("attributeName", "opacity");
        let randomBlinking = Math.random();
        if (randomBlinking > 0.7) {
            randomBlinking = 0.7;
        }
        animate.setAttribute("values", `1;${randomBlinking};1`);
        animate.setAttribute("dur", "0.5s");
        animate.setAttribute("repeatCount", "indefinite");

        star.appendChild(animate);
        svgContainer.appendChild(star)

    }
    console.log("a", radiusList, circumferenceList, elementId)

    window.addEventListener("scroll", () => {
        const scrollTop = window.scrollY;
        const scrollHeight = document.body.scrollHeight - window.innerHeight; //문서 전체 높이 - 현재 뷰포트 높이
        let t = scrollTop / scrollHeight / 3; //스크롤 빠르게 내려도 별은 천천히 보이게
        const tMax = 0.07

        if (t > tMax) t = tMax; // t가 0.2를 넘으면 아무것도 하지 않음


        circles.forEach((currentCircleDomObject, elementIndex) => {
            const currentCircumference = circumferenceList[elementIndex];
            const offset = currentCircumference * (1 - t);
            currentCircleDomObject.style.strokeDashoffset = offset;
        })

    });

</script>
<script src="./gallery.js"></script>

</html>